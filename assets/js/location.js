function initMap(lat,lon){var map=new google.maps.Map(document.getElementById('map'),{center:{lat:lat,lng:lon},zoom:16});var options={componentRestrictions:{country:"in"}};var input=document.getElementById('searchMapInput');var autocomplete=new google.maps.places.Autocomplete(input,options);autocomplete.bindTo('bounds',map);var infowindow=new google.maps.InfoWindow();var marker=new google.maps.Marker({map:map,anchorPoint:new google.maps.Point(0,-29)});autocomplete.addListener('place_changed',function(){infowindow.close();marker.setVisible(false);var place=autocomplete.getPlace();if(place.geometry.viewport){map.fitBounds(place.geometry.viewport);}else{map.setCenter(place.geometry.location);map.setZoom(17);}
marker.setIcon(({url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}));marker.setPosition(place.geometry.location);marker.setVisible(true);var address='';if(place.address_components){address=[(place.address_components[0]&&place.address_components[0].short_name||''),(place.address_components[1]&&place.address_components[1].short_name||''),(place.address_components[2]&&place.address_components[2].short_name||'')].join(' ');}
infowindow.setContent('<div><strong>'+place.name+'</strong><br>'+address);infowindow.open(map,marker);document.getElementById('searchMapInput').value=place.formatted_address;document.getElementById('latitude').value=place.geometry.location.lat();document.getElementById('longitude').value=place.geometry.location.lng();});}
function getLocation(){if(navigator.geolocation){var options={enableHighAccuracy:true,timeout:5000,maximumAge:0};navigator.geolocation.getCurrentPosition(savePosition,positionError,options);}else{}}
function positionError(error){var errorCode=error.code;var message=error.message;}
function savePosition(position){var lat=position.coords.latitude;var lon=position.coords.longitude;$('.lat').val(lat);$('#lat').val(lat);$('#lat1').val(lat);$('.long').val(lon);$('#long').val(lon);$('#long1').val(lon);displayLocation(lat,lon);initMap(lat,lon);}
function displayLocation(latitude,longitude){var geocoder;geocoder=new google.maps.Geocoder();var latlng=new google.maps.LatLng(latitude,longitude);geocoder.geocode({'latLng':latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK){if(results[0]){var add=results[0].formatted_address;var value=add.split(",");count=value.length;pin=value[count-2];document.getElementById('searchMapInput').placeholder=add;document.getElementById('latitude').value=latitude;document.getElementById('longitude').value=longitude;}}});}